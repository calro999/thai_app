<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏ï‡∏¥‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏ß‡πÅ‡∏Å‡∏•</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="images/bar.png">
    <link rel="apple-touch-icon" href="images/bar.png">

    <!-- Vercel Analytics -->
    <script defer src="/_vercel/insights/script.js"></script>

    <!-- GamePix SDK -->
    <script src="https://integration.gamepix.com/sdk/v3/gamepix.sdk.js"></script>

    <!-- GD SDK SDK Integration -->
    <script>
        window["GD_OPTIONS"] = {
            "gameId": "b8d80c10b719463ca0cceb709dc8296a", // MOCK ID, MUST REPLACE WITH REAL ID IN GD PORTAL
            "onEvent": function (event) {
                switch (event.name) {
                    case "SDK_GAME_START":
                        if (window._bgmStarted && document.getElementById('bgm-audio')) {
                            document.getElementById('bgm-audio').play().catch(() => { });
                        }
                        break;
                    case "SDK_GAME_PAUSE":
                        if (document.getElementById('bgm-audio')) {
                            document.getElementById('bgm-audio').pause();
                        }
                        window.speechSynthesis.cancel();
                        break;
                    case "SDK_GDPR_TRACKING":
                    case "SDK_GDPR_TARGETING":
                        break;
                    case "SDK_REWARDED_WATCH_COMPLETE":
                        if (window.state) {
                            if (window.state.adPointsRequested) {
                                window.state.adPointsRequested = false;
                                window.state.adPoints += 5;
                                localStorage.setItem('jlpt_with_gyaru_ad_points', window.state.adPoints);
                                document.getElementById('current-points').innerText = window.state.adPoints;
                                if (window.openUnlockModal && window.state.unlockPendingItem) {
                                    window.openUnlockModal(window.state.unlockPendingItem.id, window.state.unlockPendingItem.type);
                                }
                            } else if (window.state.unlockPendingItem) {
                                const id = window.state.unlockPendingItem.id;
                                const type = window.state.unlockPendingItem.type;
                                if (type === 'course') {
                                    if (window.unlockCourse) window.unlockCourse(id, true);
                                } else if (type === 'outfit') {
                                    if (window.unlockOutfit) window.unlockOutfit(id, true);
                                }
                                if (window.closeUnlockModal) window.closeUnlockModal();
                                if (window.closeOshikatsuSalesBox) window.closeOshikatsuSalesBox();
                                if (window.closeSpecialTravelSalesBox) window.closeSpecialTravelSalesBox();
                                if (window.closeSpecialFoodSalesBox) window.closeSpecialFoodSalesBox();
                                if (window.closeSpecialMedicalSalesBox) window.closeSpecialMedicalSalesBox();
                            }
                        }
                        break;
                }
            },
        };
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = 'https://html5.api.gamedistribution.com/main.min.js';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'gamedistribution-jssdk'));
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CCYNPFD7PR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-CCYNPFD7PR');
    </script>
</head>

<body>

    <!-- BGM -->
    <audio id="bgm-audio" src="Sakura_Dreams.mp3" loop></audio>

    <nav id="top-nav"
        style="position: fixed; top: 8px; left: 12px; right: 12px; z-index: 101; display:flex; align-items:center; justify-content:space-between; gap: 10px;">
        <button id="menu-btn" onclick="openMainMenu()"
            style="background: rgba(255,255,255,0.8); border: none; font-size:20px; cursor: pointer; border-radius: 8px; width:44px; height:44px; flex-shrink:0; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">‚ò∞</button>

        <!-- Progress Bar -->
        <div id="progress-container"
            style="display:none; flex-grow: 1; align-items: center; justify-content: center; gap: 12px; margin: 0 5px;">
            <div id="progress-text"
                style="font-weight: 900; color: #D81B60; font-size: 1.1rem; text-shadow: 1px 1px 2px rgba(255,255,255,0.9), 0 0 10px rgba(255,255,255,0.8); white-space: nowrap; z-index:2; padding: 2px 8px; background: rgba(255,255,255,0.8); border-radius: 12px;">
                0/0</div>
            <div
                style="position: relative; height: 18px; width: 100%; max-width: 250px; background: rgba(255,255,255,0.95); border-radius: 10px; border: 2px solid white; box-shadow: inset 0 2px 4px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1);">
                <div id="progress-fill"
                    style="position: absolute; left: 0; top: 0; bottom: 0; width: 0%; background: linear-gradient(90deg, #FF80AB, #F50057); border-radius: 8px; transition: width 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);">
                </div>
                <img id="progress-icon" src="images/icon.png"
                    style="position: absolute; left: 0%; top: 50%; width: 36px; height: 36px; transform: translate(-50%, -50%); transition: left 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); z-index: 3; border-radius: 50%; box-shadow: 0 3px 8px rgba(0,0,0,0.2); background: white;">
            </div>
        </div>

        <button id="settings-btn"
            style="background: rgba(255,255,255,0.8); border: none; font-size:20px; cursor: pointer; border-radius: 8px; width:44px; height:44px; flex-shrink:0; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">‚öôÔ∏è</button>
    </nav>

    <div id="game-view">
        <!-- Character Display -->
        <div class="character-container">
            <img src="images/normal.png" alt="Character" id="heroine-img">
        </div>

        <!-- Main Interaction Panel -->
        <div class="ui-bottom-panel" id="lobby-ui">
            <div class="dialogue-box">
                <p id="dialogue-text">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏ô‡∏∞! ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏â‡∏±‡∏ô‡πÑ‡∏´‡∏°?</p>
            </div>
            <div class="action-menu" id="main-action">
                <button class="action-btn" onclick="openModeSelect()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Start Learning)</button>
            </div>
            <div id="answer-grid" class="mode-grid"
                style="display:none; margin-top:9px; grid-template-columns: 1fr 1fr; gap: 10px;">
                <!-- Buttons injected by JS -->
            </div>
        </div>

        <!-- MODALS -->

        <!-- Main Menu Modal -->
        <div id="main-menu" class="overlay-menu" style="display: none;">
            <div class="mode-card">
                <h3>‡πÄ‡∏°‡∏ô‡∏π (Menu)</h3>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="mode-btn highlight" onclick="openModeSelect(); closeMainMenu();">üìñ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                        (Lessons)</button>
                    <button class="mode-btn highlight" onclick="openShop(); closeMainMenu();">üõçÔ∏è ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏∏‡∏î
                        (Shop)</button>
                    <button class="mode-btn cancel" onclick="closeMainMenu()">‡∏õ‡∏¥‡∏î (Close)</button>
                </div>
            </div>
        </div>

        <!-- Course Selection Modal -->
        <div id="mode-selection" class="overlay-menu" style="display: none;">
            <div class="mode-card">
                <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
                <div class="mode-grid">
                    <button class="mode-btn highlight" onclick="selectCourse('hiragana')">Hiragana</button>
                    <button class="mode-btn highlight" onclick="selectCourse('katakana')">Katakana</button>
                    <button class="mode-btn highlight" onclick="selectCourse('n5')">JLPT N5</button>
                    <button class="mode-btn highlight" onclick="selectCourse('n4')">JLPT N4</button>
                    <button class="mode-btn highlight" onclick="selectCourse('n3')">JLPT N3</button>
                    <button class="mode-btn highlight" id="btn-oshikatsu" onclick="selectCourse('oshikatsu')"
                        style="grid-column: span 2; border-color: #FF80AB; color: #D81B60;">Êé®„ÅóÊ¥ª„Éû„Çπ„Çø„Éº (Oshikatsu)</button>
                    <button class="mode-btn highlight"
                        style="grid-column: span 2; background: #FFF3E0; border-color: #FF9800; color: #E65100;"
                        onclick="window.location.href='lp.html'">‚ÑπÔ∏è ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡∏ô‡∏µ‡πâ (About App)</button>
                    <button class="mode-btn cancel" style="grid-column: span 2;" onclick="closeModeSelect()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        (Cancel)</button>
                </div>
            </div>
        </div>

        <!-- Listening Selection -->
        <div id="listening-selection" class="overlay-menu" style="display:none;">
            <div class="mode-card">
                <h3>üéß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á (Select Listening)</h3>
                <div class="mode-grid" id="listening-grid">
                    <!-- Listening courses injected here -->
                </div>
                <button class="mode-btn cancel" style="margin-top: 15px;"
                    onclick="document.getElementById('listening-selection').style.display='none'; openModeSelect();">‡∏Å‡∏•‡∏±‡∏ö
                    (Back)</button>
            </div>
        </div>

        <!-- Mode Select (Learning / Quiz) -->
        <div id="sub-selection" class="overlay-menu" style="display: none;">
            <div class="mode-card">
                <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h3>
                <div class="mode-grid">
                    <button class="mode-btn highlight" onclick="setGameMode('learning')" style="background: #E0F7FA;">üìñ
                        ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Learning)</button>
                    <button class="mode-btn highlight" onclick="setGameMode('quiz')" style="background: #FFF9C4;">‚öîÔ∏è
                        ‡∏Ñ‡∏ß‡∏¥‡∏ã (Quiz)</button>
                    <button class="mode-btn cancel" style="grid-column: span 2;"
                        onclick="document.getElementById('sub-selection').style.display='none'; openModeSelect();">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                        (Back)</button>
                </div>
            </div>
        </div>

        <!-- Unit Selection Modal -->
        <div id="story-selection" class="overlay-menu" style="display: none;">
            <div class="mode-card" style="border-color: #FF80AB;">
                <h3 id="story-level-title">Unit Selection</h3>
                <div id="story-list-container" class="story-grid">
                    <!-- Units injected here -->
                </div>
                <button class="mode-btn cancel"
                    onclick="closeStorySelect(); document.getElementById('sub-selection').style.display='flex';">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                    (Back)</button>
            </div>
        </div>

        <!-- Unlock Premium Modal (Unified for courses and outfits) -->
        <div id="unlock-modal" class="overlay-menu" style="display:none;">
            <div class="mode-card">
                <h3 id="unlock-title">Unlock Premium</h3>
                <p id="unlock-desc">‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ô‡∏µ‡πâ</p>
                <div id="points-display" style="margin: 15px 0; font-weight: bold; font-size: 1.2rem; color: #FF4081;">
                    ‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°: <span id="current-points">0</span> / <span id="required-points">--</span>
                </div>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="mode-btn highlight" id="use-points-btn" onclick="unlockWithPoints()">‡πÉ‡∏ä‡πâ‡πÅ‡∏ï‡πâ‡∏°‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å
                        (Use Points)</button>
                    <button class="mode-btn" onclick="purchaseItemDirect()"
                        style="background: #E1F5FE; border-color: #4FC3F7;">‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å (Watch Video)</button>
                    <button class="mode-btn" onclick="watchAdForPoints()"
                        style="background: #FFFDE7; border-color: #FFF176;">‡∏î‡∏π‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πâ‡∏° (+5)</button>
                    <button class="mode-btn cancel" onclick="closeUnlockModal()">‡∏õ‡∏¥‡∏î (Close)</button>
                </div>
            </div>
        </div>

        <!-- Result Modal -->
        <div id="result-modal" class="overlay-menu" style="display:none;">
            <div class="mode-card">
                <h3>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! (Result)</h3>
                <img id="result-img" src="images/normal.png"
                    style="height: 150px; display: block; margin: 15px auto; object-fit: contain;">
                <p id="result-message" style="font-weight: bold; margin-bottom: 5px; color: #666;"></p>
                <p id="result-score" style="font-size: 2.2rem; font-weight: bold; color: #FF4081; margin: 10px 0;">0 /
                    10</p>
                <button class="mode-btn highlight" id="result-close">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏°‡∏ô‡∏π</button>
            </div>
        </div>

        <!-- Shop Modal -->
        <div id="shop-modal" class="overlay-menu" style="display:none;">
            <div class="mode-card" style="max-width: 400px;">
                <h3 id="shop-title">üõçÔ∏è ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏∏‡∏î‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢ (Outfit Shop)</h3>
                <div id="shop-list" style="max-height: 400px; overflow-y: auto; padding: 10px 0;">
                    <!-- Outfits injected here -->
                </div>
                <button class="mode-btn cancel" onclick="closeShop()" style="margin-top: 15px;">‡∏Å‡∏•‡∏±‡∏ö (Back)</button>
            </div>
        </div>

        <!-- Oshikatsu Special Sales Box -->
        <div id="oshikatsu-sales-box" class="overlay-menu" style="display:none;">
            <div class="mode-card" style="border-color: #FF80AB; padding: 30px 20px;">
                <h3 style="color: #D81B60;">üîë ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡πÇ‡∏≠‡∏ï‡∏≤‡∏Ñ‡∏∏</h3>
                <p style="font-size: 1rem; line-height: 1.6; color: #333; margin-bottom: 20px; text-align: left;">
                    <b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≠‡∏£‡πå‡∏™:</b><br>
                    ‚Ä¢ ‡∏£‡∏ß‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 100 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 50 ‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞ ‡∏Ñ‡∏ß‡∏¥‡∏ã 50 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á <b>15 ‡πÅ‡∏ï‡πâ‡∏° (‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)</b><br><br>
                    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ ‡∏Ñ‡πà‡∏∞
                    ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏π‡∏à‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                </p>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="mode-btn highlight" onclick="purchaseItemDirect()"
                        style="background: #FCE4EC; border-color: #F06292; color: #D81B60; padding: 18px; font-size: 1.1rem;">
                        üõí ‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å (Watch Video)
                    </button>
                    <button class="mode-btn cancel" onclick="closeOshikatsuSalesBox()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)</button>
                </div>
            </div>
        </div>

        <!-- Special Travel Sales Box -->
        <div id="special-travel-sales-box" class="overlay-menu" style="display:none;">
            <div class="mode-card" style="border-color: #FF80AB; padding: 30px 20px;">
                <h3 style="color: #D81B60;">üîë ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡∏ã‡∏±‡∏ö‡πÑ‡∏ß‡∏ß‡∏±‡∏•: 50 ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ</h3>
                <p style="font-size: 1rem; line-height: 1.6; color: #333; margin-bottom: 20px; text-align: left;">
                    <b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≠‡∏£‡πå‡∏™:</b><br>
                    ‚Ä¢ ‡∏£‡∏ß‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 100 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 50 ‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞ ‡∏Ñ‡∏ß‡∏¥‡∏ã 50 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á <b>15 ‡πÅ‡∏ï‡πâ‡∏° (‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)</b><br><br>
                    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ ‡∏Ñ‡πà‡∏∞
                    ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏π‡∏à‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                </p>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="mode-btn highlight" onclick="purchaseItemDirect()"
                        style="background: #FCE4EC; border-color: #F06292; color: #D81B60; padding: 18px; font-size: 1.1rem;">
                        üõí ‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å (Watch Video)
                    </button>
                    <button class="mode-btn cancel" onclick="closeSpecialTravelSalesBox()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)</button>
                </div>
            </div>
        </div>

        <!-- Special Food Sales Box -->
        <div id="special-food-sales-box" class="overlay-menu" style="display:none;">
            <div class="mode-card" style="border-color: #FF80AB; padding: 30px 20px;">
                <h3 style="color: #D81B60;">üîë ‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡∏£‡πå‡πÄ‡∏°‡∏ï‡πå</h3>
                <p style="font-size: 1rem; line-height: 1.6; color: #333; margin-bottom: 20px; text-align: left;">
                    <b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≠‡∏£‡πå‡∏™:</b><br>
                    ‚Ä¢ ‡∏£‡∏ß‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 120 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 60 ‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞ ‡∏Ñ‡∏ß‡∏¥‡∏ã 60 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á <b>15 ‡πÅ‡∏ï‡πâ‡∏° (‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)</b><br><br>
                    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ ‡∏Ñ‡πà‡∏∞
                    ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏π‡∏à‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                </p>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="mode-btn highlight" onclick="purchaseItemDirect()"
                        style="background: #FCE4EC; border-color: #F06292; color: #D81B60; padding: 18px; font-size: 1.1rem;">
                        üõí ‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å (Watch Video)
                    </button>
                    <button class="mode-btn cancel" onclick="closeSpecialFoodSalesBox()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)</button>
                </div>
            </div>
        </div>

        <!-- Special Medical Sales Box -->
        <div id="special-medical-sales-box" class="overlay-menu" style="display:none;">
            <div class="mode-card" style="border-color: #FF80AB; padding: 30px 20px;">
                <h3 style="color: #D81B60;">üîë ‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡πà‡∏ß‡∏¢‡πÅ‡∏•‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à</h3>
                <p style="font-size: 1rem; line-height: 1.6; color: #333; margin-bottom: 20px; text-align: left;">
                    <b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≠‡∏£‡πå‡∏™:</b><br>
                    ‚Ä¢ ‡∏£‡∏ß‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 120 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 60 ‡∏Ç‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞ ‡∏Ñ‡∏ß‡∏¥‡∏ã 60 ‡∏Ç‡πâ‡∏≠<br>
                    ‚Ä¢ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á <b>15 ‡πÅ‡∏ï‡πâ‡∏° (‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)</b><br><br>
                    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤ ‡∏Ñ‡πà‡∏∞
                    ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏î‡∏π‡∏à‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                </p>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="mode-btn highlight" onclick="purchaseItemDirect()"
                        style="background: #FCE4EC; border-color: #F06292; color: #D81B60; padding: 18px; font-size: 1.1rem;">
                        üõí ‡∏î‡∏π‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å (Watch Video)
                    </button>
                    <button class="mode-btn cancel" onclick="closeSpecialMedicalSalesBox()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="overlay-menu" style="display:none;">
            <div class="mode-card" style="max-width:380px;">
                <h3>‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Settings)</h3>

                <div
                    style="overflow-y: auto; max-height: 55vh; padding-right: 10px; margin-bottom: 15px; overflow-x: hidden;">
                    <div style="margin-bottom: 20px; text-align: left;">
                        <p style="font-weight: bold; margin-bottom: 8px;">üéµ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏•‡∏á BGM: <span
                                id="bgm-volume-value">4</span>%</p>
                        <input type="range" id="bgm-volume-range" min="0" max="20" step="1" value="4"
                            style="width: 100%;" oninput="setBgmVolume(this.value)">
                    </div>

                    <div style="margin-bottom: 20px; text-align: left;">
                        <p style="font-weight: bold; margin-bottom: 8px;">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏™‡∏µ‡∏¢‡∏á (TTS Speed): <span
                                id="tts-rate-value">0.8</span></p>
                        <input type="range" id="tts-rate-range" min="0.5" max="1.5" step="0.1" value="0.8"
                            style="width: 100%;">
                    </div>

                    <div style="margin-bottom: 20px; text-align: left;">
                        <p style="font-weight: bold; margin-bottom: 8px;">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á (TTS Volume): <span
                                id="tts-volume-value">1.0</span></p>
                        <input type="range" id="tts-volume-range" min="0.1" max="1" step="0.1" value="1.0"
                            style="width: 100%;">
                    </div>

                    <div style="margin-bottom: 15px; border-top: 1px solid #eee; padding-top: 15px;">
                        <p style="font-weight: bold; margin-bottom: 8px;">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ (Character Settings)</p>
                        <div class="preview-container">
                            <div class="preview-img-wrapper" style="height: 150px; margin-bottom: 10px;">
                                <img id="settings-preview-img" src="images/normal.png" alt="Preview"
                                    style="height: 100%; object-fit: contain;">
                            </div>
                            <div class="preview-controls"
                                style="display: flex; gap: 20px; align-items: center; justify-content: center;">
                                <button class="mode-btn" onclick="previewPrev()"
                                    style="width: auto; padding: 5px 15px;">‚óÄ</button>
                                <span id="preview-outfit-name" style="font-weight: bold;">Default</span>
                                <button class="mode-btn" onclick="previewNext()"
                                    style="width: auto; padding: 5px 15px;">‚ñ∂</button>
                            </div>
                        </div>
                        <button id="apply-outfit-btn" class="mode-btn highlight" onclick="applyPreviewedOutfit()"
                            style="margin-top: 10px;">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∏‡∏î (Apply)</button>
                    </div>
                </div>

                <button class="mode-btn cancel" onclick="closeSettings()">‡∏õ‡∏¥‡∏î (Close)</button>
            </div>
        </div>

    </div>

    <script src="app.js?v=5"></script>
</body>

</html>